-------------------------------------------------------------------------------------------------------------------------------------------
                                                    BANCO DE DADOS / MYSQL
-------------------------------------------------------------------------------------------------------------------------------------------

Para o que serve? Registrar instâncias de coisas separadas que tem caracterisitcas semelhantes em tabelas


-- Como modelar
	1. Modelar entidades com atributos e relacionamentos.
	2. Classificar relacionamento com suas cardinalidades.

-- Estrutura
	Modelo relacional: Tipo de estrutura de banco de dados onde as entidades se relacionam e permitem que você caminhe através 
   	dessas relações buscando informações relacionadas.
	BANCO DE DADOS { TABELAS { COLUNAS { REGISTROS }}}
	ENGINE: "Máquina de criação de tabelas" inoDB: "Criação de tabelas com alguma carácteristicas, permite relacionamento
	entre entidades pois são compátives com chaves estrangeiras e garante os 4 fundamentos necessários para que ocorra
	uma transação {Durabilidade, isolamento, consistência e atomicidade}"


-- Definições / Conceitos
   Integridade referêncial: Não se pode deletar registros que possuem relacionamentos.
   Relacionamento: Entidade relacionada a outra entidade, ultiza o diagrama entidade-relacionamento para esboçar sua
   estrutura. (DER)
   Entidade: Tabela
   Atributos: carácteristicas da tabela
   Cardinalidade: 1 - n, n - 1. (Conceito que define com quantos registros/tuplas cada registro/tuplas pode se relacionar) {
   	Relacionamentos:
		1 p 1: Entidade dominanete com chave estrangeira de outra entidade e vice-verssa
		1 p n: Chave primária do lado 1 e joga para n como chave estrangeira
		n p n: Irá ser criado uma nova entidade para representar esse relacionamento, nessa nova entidade será criado 
		novos atributos referente ao cenário que se encontra criando uma chave primária para identifica-lá, assim cada 
		tabela n irá virar 1 que irá se relacionar com essa nova entidade que será n p n. Neste caso jogar a chave 
		primária de cada entidade na entidade n p n. Exemplo: Pedidos tem itens pedidos que
		
   }
   Chave primária / PRIMARY KEY: Identifica cada registro, ou seja, ele e unico naquele contexto.
   Chave estrangeira  / Foreign key: Chave primária de uma entidade x que esta na entidade y para criar relacionamento.
   
   
   
   -- Linguagens
   	DDL: Definição / Mexe na estrutura {CREATE DATABASE, CREATE TABLE, ALTER TABLE, DROP TABLE }
	DML: Manipulação / Mexe em dados {INSERT INTO, UPDATE, DELETE, TRUNCATE, SELECT}
	DQL: Solicitações
	DCL: Controle
	DTL: Transações {Durabilidade, isolamento, consistência e atomicidade}
	// Data [x] Language
	
-- Tipos primitivos
	Numérico { Inteiro, Real, Lógico } 
	DATA/TIME { Data, Hora, Year }
	Literal { Caractere, Texto, Binário, Coleção }
	Espacial { Geometry, Point, Polygon, MultiPolygon }
	
-- Comandos 
	CREATE DATABASE bancodeteste // Criar base de dados
	DEFAULT CHARACTER SET utf8 		|| Ambos para configu -
	DEFAULT COLLATE utf8_general_ci;	|| ração de acentuação
	USE bancodeteste;   // Usar base de dados
	DESCRIBE || DESC;		// Descrever dados desejados
	STATUS;			// Listar BD abertos
	DROP;			// Excluir tabelas
	RENAME TABLE users TO user;    // Renomear tabela
	SELECT * FROM projetoDoceria.product;   // Listar da tabela projetoDoceria os dados de produtos

	* Tabelas e colunas
	  
	  IF NOT EXISTS || IF EXISTS	// Usado na criaçao de tabela como condicional, exemplo: CREATE TABLE IF NOT 
	  EXISTS pessoa(...);
	  
	  CREATE TABLE users( 
	  id int(4) AUTO_INCREMENT,
	  name varchar(255) NOT NULL,
	  email varchar(255) NOT NULL UNIQUE,
	  telephone varchar(255),
	  userName varchar(255) NOT NULL UNIQUE,
	  password varchar(255) NOT NULL,
	  PRIMARY KEY (id)
	  );
	  
	  ALTER TABLE itemPedido CHANGE COLUMN quantidade amount INT(11) NOT NULL;	// Alterar dados da coluna renomeando a mesma [
	  CHANGE: tipos, constraints e nome da coluna] 
	  ALTER TABLE itemPedido MODIFY COLUMN quantidade INT(11) NOT NULL;		// Alterar dados da coluna [MODIFY:
	  alterar tipos e constraints]
	  ALTER TABLE purchaseOrder ADD COLUMN customer_id INT(4) NOT NULL;	// Adicionar dados coluna
	  ALTER TABLE pessoa RENAME TO gafanhotos;	// Renomear tabelas
	  
	  ALTER TABLE TABELA_SERVICO ADD CONSTRAINT 'NOME DA CONSTRAINT' FOREIGN KEY(NOME ATRIBUTO AO QUAL QUER REFERENCIAR)
	  REFERENCES NOMEDATABELA(ATRIBUTOQUEDESEJA); 		// Alterando tabela e adicionando relacionamentos

	  TRUNCATE TABLE cursos;
	  
	  
	* Registros
   	 DELETE FROM tbl_autores WHERE ID_Autor = 2;		// Excluir registros
 	 INSERT INTO fornecedores(codigo, nome) VALUES (null, “Ricardo")	// Inserir dados na tabela
	 UPDATE nomedatabela SET atributo=novovalor WHERE id=iddatabela		// Atualizando registros de colunas já populadas
  	
	
	* JOIN
	  Inner Join    // retorna os registros que são comuns às duas tabelas ou seja que tenha relação.
	  Exemplo:
	  SELECT o.purchaseOrder_id,  p.name, o.amount, p.unitaryValue, o.Totalvalue
	  FROM orderedItem as o
	  INNER JOIN product as p
			on o.product_id = p.id		// Restrição para o JOIN, assim ira juntar as tabelas porém aplicando
			a restrição definida no on.
			ORDER BY o.purchaseOrder_id;	
  
	* Left Join   // tem como resultado todos os registros que estão na tabela A (mesmo que não estejam na tabela B) e os registros 
	  da tabela B que são comuns à tabela A.
	  SELECT a.Nome, b.Nome
	  FROM TabelaA as A
	  LEFT JOIN TabelaB as B
			on a.Nome = b.Nome
  
	* Right Join    // teremos como resultado todos os registros que estão na tabela B (mesmo que não estejam na tabela A) e os registros 
  	da tabela A que são comuns à tabela B.
		SELECT a.Nome, b.Nome
		FROM TabelaA as A
		RIGHT JOIN TabelaB as B
			on a.Nome = b.Nome
  
	* Outer Join (Pode ser usado LEFT / RIGHT para definir qual tabela terá preferência na query)   //  tem como resultado todos 
	os registros que estão na tabela A e todos os registros da tabela B, inclusive os que não se relacionam.
		SELECT a.Nome, b.Nome
		FROM TabelaA as A
		FULL OUTER JOIN TabelaB as B
			on a.Nome = b.Nome
	* Left Excluding Join   // retorna como resultado todos os registros que estão na tabela A e que não estejam na tabela B.
		SELECT a.Nome, b.Nome
		FROM TabelaA as A
		LEFT JOIN TabelaB as B
			on a.Nome = b.Nome
			WHERE b.Nome is null
  
	* Right Excluding Join    //  retorna como resultado todos os registros que estão na tabela B e que não estejam na tabela A.
		SELECT a.Nome, b.Nome
		FROM TabelaA as A
		RIGHT JOIN TabelaB as B
			on a.Nome = b.Nome
			WHERE a.Nome is null

	* Outer Excluding Join    //  teremos como resultado todos os registros que estão na tabela B, mas que não estejam na tabela A, e todos os 
  	registros que estão na tabela A, mas que não estejam na tabela B.
		SELECT a.Nome, b.Nome
		FROM TabelaA as A
		FULL OUTER JOIN TabelaB as B
			on a.Nome = b.Nome
			WHERE a.Nome is null or b.Nome is null

-- RESTRIÇÕES
	AUTO-INCREMENT
	NOT NULL
	UNIQUE	
	AFTER
	FIRST	
	UNSIGNED (Sem acentuaçoes)
	
-- OPERADORES RELACIONAIS
	LIMIT		// Limitar quantas linhas serão afetadas
	ORDER BY	// Ordena por
	DESC|ASC	// Decrescente
	BETWEEN		// Entre
	IN		// Dentro dos paramêtros especificados
	LIKE|NOT LIKE	// Parecido com
	DISTINCT	// Distinguir registros que não repetem
	
-- WILDCARDS
	_	// Exige que tenha algo
	%	// Normalmente usado em conjunto com algo, representa "Vários ou nenhum caráctere" ex: LIKE nome = 'P%'
	
-- FUNCÕES DE AGRAGAÇÃO
	COUNT()		// Exibir quantos registros há (SELECT COUNT(*) FROM...)
	MAX()|MIN()	// Exibir maior (SELECT MAX(carga) FROM...)
	SUM()		// Soma
	AVG()		// Média 
	
-- Instalação
	MySql > sudo apt install mysql-server mysql-client && sudo mysql_secure_installation
	WorkBench > sudo apt install mysql-workbench
  
-- Comandos terminal / Configuração / Manutenção
	mysql -h localhost -u root -p   // Entrar no mysql setando o -h referenciando o servidor (localhost), -u referenciando ao usuário
	e -p referente a senha.
	CREATE USER 'novousuario'@'localhost' IDENTIFIED BY 'password';   //Criar um Novo Usuário
	GRANT ALL PRIVILEGES ON * . * TO 'novousuario'@'localhost';   // Atribuir privilégios a determinado usuário
	FLUSH PRIVILEGES;   // Resetar privilégios

-- Dump
	Exportar:
		Workbench: Server > Data Export > Setar atributos (Exportar apenas estrutura, datas, e etc...)
		Terminal: mysqldump -u root -p projetoDoceria > ~/Documents/projetoDoceria.sql
	Importar:
		Workbench: Server > Data Import > Setar atributos
		Terminal: mysql -u root -p projetoDoceria < ~/Documents/projetoDoceria.sql
-- Sites 
	Curso > https://www.youtube.com/watch?v=Ofktsne-utM&list=PLHz_AreHm4dkBs-795Dsgvau_ekxg8g1r 
	Desinstalar mysql > https://linuxscriptshub.com/uninstall-completely-remove-mysql-ubuntu-16-04/ 
	Primeiros passos mysql > https://www.devmedia.com.br/primeiros-passos-no-mysql/28438
	Relacionamento de tabelas > https://www.devmedia.com.br/forum/relacionamento-de-tabelas-no-mysql-chave-estrangeira/558559


